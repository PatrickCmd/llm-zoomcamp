# LLM RAG
## Configuration
### Environment
- Copy `.env.example` file to `.env`
- Fill in the required values
## Installation
### Using `pip`
- Create and activate new Python virtual environment
- `pip install -r requirements.txt`
- `pip install -e .` (basic packages)  
  or  
  `pip install -e .[ragatouille]` (with `ragatouille` for ColBERT)
### Using `uv`
- `uv sync --group dev` (basic packages)  
  or  
  `uv sync --group dev --extra ragatouille` (with `ragatouille` for ColBERT)
- `uv pip install -e .`


## RAG From Scratch
[YouTube Playlist](https://www.youtube.com/playlist?list=PLfaIDFEXuae2LXbO1_PKyVJiQ23ZztA0x)  
[Repository](https://github.com/langchain-ai/rag-from-scratch)
 
| Part | Name                                     | Video                                                                                        | Slides                                                                                      | Jupyter Notebook                                                                                                                                                                                                                                                                                                                  | Python Script                                                                                                                                                                                                | LangGraph Studio                                                                                                          |
| ---- | ---------------------------------------- | -------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------- |
| 1    | Overview                                 | [Watch](https://www.youtube.com/watch?v=wd7TZ4w1mSw&list=PLfaIDFEXuae2LXbO1_PKyVJiQ23ZztA0x) | [View](https://docs.google.com/presentation/d/1C9IaAwHoWcc4RSTqo-pCoN3h0nCgqV2JEYZUJunv_9Q) | [01-overview.ipynb](notebooks/rag-from-scratch/01-overview.ipynb)                                                                                                                                                                                                                                                                 | -                                                                                                                                                                                                            | -                                                                                                                         |
| 2    | Indexing                                 | [Watch](https://www.youtube.com/watch?v=bjb_EMsTDKI&list=PLfaIDFEXuae2LXbO1_PKyVJiQ23ZztA0x) | [View](https://docs.google.com/presentation/d/1MhsCqZs7wTX6P19TFnA9qRSlxH3u-1-0gWkhBiDG9lQ) | [02-indexing.ipynb](notebooks/rag-from-scratch/02-indexing.ipynb)                                                                                                                                                                                                                                                                 | -                                                                                                                                                                                                            | -                                                                                                                         |
| 3    | Retrieval                                | [Watch](https://www.youtube.com/watch?v=LxNVgdIz9sU&list=PLfaIDFEXuae2LXbO1_PKyVJiQ23ZztA0x) | [View](https://docs.google.com/presentation/d/124I8jlBRCbb0LAUhdmDwbn4nREqxSxZU1RF_eTGXUGc) | [03-retrieval.ipynb](notebooks/rag-from-scratch/03-retrieval.ipynb)                                                                                                                                                                                                                                                               | -                                                                                                                                                                                                            | -                                                                                                                         |
| 4    | Generation                               | [Watch](https://www.youtube.com/watch?v=Vw52xyyFsB8&list=PLfaIDFEXuae2LXbO1_PKyVJiQ23ZztA0x) | [View](https://docs.google.com/presentation/d/1eRJwzbdSv71e9Ou9yeqziZrz1UagwX8B1kL4TbL5_Gc) | [04-generation.ipynb](notebooks/rag-from-scratch/04-generation.ipynb)                                                                                                                                                                                                                                                             | -                                                                                                                                                                                                            | -                                                                                                                         |
| 5    | Query Translation - Multi-Query          | [Watch](https://www.youtube.com/watch?v=JChPi0CRnDY&list=PLfaIDFEXuae2LXbO1_PKyVJiQ23ZztA0x) | [View](https://docs.google.com/presentation/d/15pWydIszbQG3Ipur9COfTduutTZm6ULdkkyX-MNry8I) | [05-multi-query.ipynb](notebooks/rag-from-scratch/05-multi-query.ipynb)                                                                                                                                                                                                                                                           | [multi_query.py](src/llm_rag/graphs/multi_query/multi_query.py)                                                                                                                                              | Query Translation - Multi-Query                                                                                           |
| 6    | Query Translation - RAG-Fusion           | [Watch](https://www.youtube.com/watch?v=77qELPbNgxA&list=PLfaIDFEXuae2LXbO1_PKyVJiQ23ZztA0x) | [View](https://docs.google.com/presentation/d/1EwykmdVSQqlh6XpGt8APOMYp4q1CZqqeclAx61pUcjI) | [06-rag-fusion.ipynb](notebooks/rag-from-scratch/06-rag-fusion.ipynb)                                                                                                                                                                                                                                                             | [rag_fusion.py](src/llm_rag/graphs/rag_fusion/rag_fusion.py)                                                                                                                                                 | Query Translation - RAG-Fusion                                                                                            |
| 7    | Query Translation - Decomposition        | [Watch](https://www.youtube.com/watch?v=h0OPWlEOank&list=PLfaIDFEXuae2LXbO1_PKyVJiQ23ZztA0x) | [View](https://docs.google.com/presentation/d/1O97KYrsmYEmhpQ6nkvOVAqQYMJvIaZulGFGmz4cuuVE) | [07-01-decomposition-recursive.ipynb](notebooks/rag-from-scratch/07-01-decomposition-recursive.ipynb)<br>[07-02-decomposition-parallel.ipynb](notebooks/rag-from-scratch/07-02-decomposition-parallel.ipynb)                                                                                                                      | [recursive.py](src/llm_rag/graphs/decomposition/recursive.py)<br>[parallel.py](src/llm_rag/graphs/decomposition/parallel.py)                                                                                 | Query Translation - Decomposition (Recursive)<br>Query Translation - Decomposition (Parallel)                             |
| 8    | Query Translation - Step-Back Prompting  | [Watch](https://www.youtube.com/watch?v=xn1jEjRyJ2U&list=PLfaIDFEXuae2LXbO1_PKyVJiQ23ZztA0x) | [View](https://docs.google.com/presentation/d/1L0MRGVDxYA1eLOR0L_6Ze1l2YV8AhN1QKUtmNA-fJlU) | [08-step-back.ipynb](notebooks/rag-from-scratch/08-step-back.ipynb)                                                                                                                                                                                                                                                               | [step_back.py](src/llm_rag/graphs/step_back/step_back.py)                                                                                                                                                    | Query Translation - Step-Back Prompting                                                                                   |
| 9    | Query Translation - HyDE                 | [Watch](https://www.youtube.com/watch?v=SaDzIVkYqyY&list=PLfaIDFEXuae2LXbO1_PKyVJiQ23ZztA0x) | [View](https://docs.google.com/presentation/d/10MmB_QEiS4m00xdyu-92muY-8jC3CdaMpMXbXjzQXsM) | [09-hyde.ipynb](notebooks/rag-from-scratch/09-hyde.ipynb)                                                                                                                                                                                                                                                                         | [hyde.py](src/llm_rag/graphs/hyde/hyde.py)                                                                                                                                                                   | Query Translation - HyDE                                                                                                  |
| 10   | Routing                                  | [Watch](https://www.youtube.com/watch?v=pfpIndq7Fi8&list=PLfaIDFEXuae2LXbO1_PKyVJiQ23ZztA0x) | [View](https://docs.google.com/presentation/d/1kC6jFj8C_1ZXDYcFaJ8vhJvCYEwxwsVqk2VVeKKuyx4) | [10-01-logical-routing.ipynb](notebooks/rag-from-scratch/10-01-logical-routing.ipynb)                                                                                                                                                                                                                                             | [logical.py](src/llm_rag/graphs/routing/logical.py)<br>[semantic.py](src/llm_rag/graphs/routing/semantic.py)                                                                                                 | Routing - Logical Routing<br>Routing - Semantic Routing                                                                   |
| 11   | Query Construction                       | [Watch](https://www.youtube.com/watch?v=kl6NwWYxvbM&list=PLfaIDFEXuae2LXbO1_PKyVJiQ23ZztA0x) | [View](https://docs.google.com/presentation/d/1bUwz4PgzMIwbBi7DFzpHUkLL4Z6jcKmNGJ-BlK0Hpps) | [11-query-construction.ipynb](notebooks/rag-from-scratch/11-query-construction.ipynb)                                                                                                                                                                                                                                             | [self_query.py](src/llm_rag/graphs/query_construction/self_query.py)                                                                                                                                         | Query Construction - Self-Query                                                                                           |
| 12   | Indexing - Multi-Representation Indexing | [Watch](https://www.youtube.com/watch?v=gTCU9I6QqCE&list=PLfaIDFEXuae2LXbO1_PKyVJiQ23ZztA0x) | [View](https://docs.google.com/presentation/d/1Pu3q1MApA-V_PMvL2YDmWzaDX3HkTh0uUl2BFTcsalk) | [12-01-multi-vector-summary.ipynb](notebooks/rag-from-scratch/12-01-multi-vector-summary.ipynb)<br>[12-02-multi-vector-chunks.ipynb](notebooks/rag-from-scratch/12-02-multi-vector-chunks.ipynb)<br>[12-03-multi-vector-hypothetical-questions.ipynb](notebooks/rag-from-scratch/12-03-multi-vector-hypothetical-questions.ipynb) | [summary.py](src/llm_rag/graphs/multi_vector/summary.py)<br>[chunks.py](src/llm_rag/graphs/multi_vector/chunks.py)<br>[hypothetical_questions.py](src/llm_rag/graphs/multi_vector/hypothetical_questions.py) | Indexing - Multi-Vector - Summary<br>Indexing - Multi-Vector - Chunks<br>Indexing - Multi-Vector - Hypothetical Questions |
| 13   | Indexing - RAPTOR                        | [Watch](https://www.youtube.com/watch?v=z_6EeA2LDSw&list=PLfaIDFEXuae2LXbO1_PKyVJiQ23ZztA0x) | [View](https://docs.google.com/presentation/d/1U8NpSS1sq3-deiNvSGGNg_UY2Zh_5fS2HabuQFJPftc) | [13-raptor.ipynb](notebooks/rag-from-scratch/13-raptor.ipynb)                                                                                                                                                                                                                                                                     | [raptor.py](src/llm_rag/graphs/raptor/raptor.py)                                                                                                                                                             | -                                                                                                                         |  |
| 14   | Indexing - ColBERT                       | [Watch](https://www.youtube.com/watch?v=cN6S0Ehm7_8&list=PLfaIDFEXuae2LXbO1_PKyVJiQ23ZztA0x) | [View](https://docs.google.com/presentation/d/1IRhAdGjIevrrotdplHNcc4aXgIYyKamUKTWtB3m3aMU) | [14-colbert.ipynb](notebooks/rag-from-scratch/14-colbert.ipynb)                                                                                                                                                                                                                                                                   | [colbert_model.py](src/llm_rag/graphs/colbert/colbert_model.py)                                                                                                                                              | -                                                                                                                         |  |


### Query Translation
#### RAG Fusion
[Forget RAG, the Future is RAG-Fusion](https://medium.com/towards-data-science/forget-rag-the-future-is-rag-fusion-1147298d8ad1)  
[RAG-Fusion: The Next Frontier of Search Technology](https://github.com/Raudaschl/rag-fusion)  
[Reciprocal Rank Fusion outperforms Condorcet and individual Rank Learning Methods](https://plg.uwaterloo.ca/~gvcormac/cormacksigir09-rrf.pdf)  
[Implementing Reciprocal Rank Fusion (RRF) in Python](https://safjan.com/implementing-rank-fusion-in-python)

#### Decomposition (Recursive)
[Least-to-Most Prompting Enables Complex Reasoning in Large Language Models](https://arxiv.org/abs/2205.10625)  
[Interleaving Retrieval with Chain-of-Thought Reasoning for Knowledge-Intensive Multi-Step Questions](https://arxiv.org/abs/2212.10509)  

#### Step-Back Prompting
[Take a Step Back: Evoking Reasoning via Abstraction in Large Language Models](https://arxiv.org/abs/2310.06117)

#### HyDE
[Precise Zero-Shot Dense Retrieval without Relevance Labels](https://arxiv.org/abs/2212.10496)


### Routing
[Semantic Router](https://github.com/aurelio-labs/semantic-router)


### Indexing
#### Multi-Representation Indexing
[Dense X Retrieval: What Retrieval Granularity Should We Use?](https://arxiv.org/abs/2312.06648)

#### RAPTOR
[RAPTOR: Recursive Abstractive Processing for Tre-Organized Retrieval](https://arxiv.org/pdf/2401.18059)
[Building long context RAG with RAPTOR from scratch](https://www.youtube.com/watch?v=jbGchdTL7d0)

#### ColBERT
[ColBERT: Efficient and Effective Passage Search via Contextualized Late Interaction over BERT](https://arxiv.org/abs/2004.12832)  
[ColBERTv2: Effective and Efficient Retrieval via Lightweight Late Interaction](https://arxiv.org/abs/2112.01488)  
[RAGatouille](https://github.com/AnswerDotAI/RAGatouille)  
[[Paper review] ColBERT, ColBERTv2](https://pangyoalto.com/en/colbertv1-2-review-en)  
[Overcoming the Limits of RAG with ColBERT](https://thenewstack.io/overcoming-the-limits-of-rag-with-colbert)  
[ColBERT Inference in the Browser](https://colbert.aiserv.cloud)  
